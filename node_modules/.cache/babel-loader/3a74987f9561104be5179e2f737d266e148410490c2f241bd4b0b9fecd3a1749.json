{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import $ from'jquery';import'datatables.net-dt/js/dataTables.dataTables.js';import{apiGet,apiPost}from\"../services/client\";import{useSearchParams}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MeterDataDetails=()=>{const[loading,setLoading]=useState(false);const[searchParams]=useSearchParams();const id=searchParams.get('id');const[ReadingData,setReadingsData]=useState([]);const[tableHeaders,setTableHeaders]=useState([]);// Fetch meters data\nconst getData=async()=>{try{var _res$data;const data={id};console.log(data);setLoading(true);const res=await apiPost(\"admin/get-readings\",data);// Use apiGet instead of apiPost for GET requests\nconsole.log(res);if((res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.status)===true){var _res$data2,_res$data3;console.log(res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.data);const data=res===null||res===void 0?void 0:(_res$data3=res.data)===null||_res$data3===void 0?void 0:_res$data3.data;setReadingsData(data);if(data.length>0){setTableHeaders(Object.keys(data[0]));// Assuming data[0] contains the object with keys\n}// Destroy existing DataTable instance if it exists\nif($.fn.DataTable.isDataTable(\"#dataTable\")){$(\"#dataTable\").DataTable().destroy();}// Reinitialize DataTable after updating data\nsetTimeout(()=>{$(\"#dataTable\").DataTable({pageLength:10});},0);}else{var _res$data4;console.log(res===null||res===void 0?void 0:(_res$data4=res.data)===null||_res$data4===void 0?void 0:_res$data4.message);}}catch(e){console.log(e);}finally{setLoading(false);}};useEffect(()=>{getData();},[]);return/*#__PURE__*/_jsxs(\"table\",{className:\"table bordered-table mb-0\",id:\"dataTable\",\"data-page-length\":10,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Member ID\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Location\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Created At\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{})]})})]});};export default MeterDataDetails;","map":{"version":3,"names":["React","useEffect","useState","$","apiGet","apiPost","useSearchParams","jsx","_jsx","jsxs","_jsxs","MeterDataDetails","loading","setLoading","searchParams","id","get","ReadingData","setReadingsData","tableHeaders","setTableHeaders","getData","_res$data","data","console","log","res","status","_res$data2","_res$data3","length","Object","keys","fn","DataTable","isDataTable","destroy","setTimeout","pageLength","_res$data4","message","e","className","children","scope"],"sources":["C:/Users/ATS/Downloads/power-c/src/components/UserMeterDataTable.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport $ from 'jquery';\r\nimport 'datatables.net-dt/js/dataTables.dataTables.js';\r\nimport { apiGet, apiPost } from \"../services/client\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\nconst MeterDataDetails = () => {\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [searchParams] = useSearchParams();\r\n    const id = searchParams.get('id');\r\n    const [ReadingData, setReadingsData] = useState([]);\r\n    const [tableHeaders, setTableHeaders] = useState([]);\r\n\r\n    // Fetch meters data\r\n    const getData = async () => {\r\n        try {\r\n            const data = { id };\r\n            console.log(data);\r\n   \r\n            setLoading(true);\r\n            const res = await apiPost(\"admin/get-readings\", data); // Use apiGet instead of apiPost for GET requests\r\n            console.log(res);\r\n   \r\n            if (res?.data?.status === true) {\r\n                console.log(res?.data?.data);\r\n                const data = res?.data?.data;\r\n                setReadingsData(data);  \r\n\r\n                if (data.length > 0) {\r\n                    setTableHeaders(Object.keys(data[0])); // Assuming data[0] contains the object with keys\r\n                }\r\n   \r\n                // Destroy existing DataTable instance if it exists\r\n                if ($.fn.DataTable.isDataTable(\"#dataTable\")) {\r\n                    $(\"#dataTable\").DataTable().destroy();\r\n                }\r\n   \r\n                // Reinitialize DataTable after updating data\r\n                setTimeout(() => {\r\n                    $(\"#dataTable\").DataTable({\r\n                        pageLength: 10,\r\n                    });\r\n                }, 0);\r\n            } else {\r\n                console.log(res?.data?.message);\r\n            }\r\n        } catch (e) {\r\n            console.log(e);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n   \r\n\r\n    useEffect(() => {\r\n        getData();\r\n    }, []);\r\n\r\n\r\n    return (\r\n\r\n        <table\r\n            className=\"table bordered-table mb-0\"\r\n            id=\"dataTable\"\r\n            data-page-length={10}\r\n        >\r\n            <thead>\r\n                <tr>\r\n                    <th scope=\"col\">Member ID</th>\r\n                    <th scope=\"col\">Name</th>\r\n                    <th scope=\"col\">Location</th>\r\n                    <th scope=\"col\">Created At</th>\r\n                    <th scope=\"col\">Status</th>\r\n                    <th scope=\"col\">Action</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n\r\n                <tr>\r\n                    <td></td>\r\n                    <td></td>\r\n                    <td></td>\r\n                    <td></td>\r\n                    <td></td>\r\n                    <td></td>\r\n                </tr>\r\n            </tbody>\r\n\r\n        </table>\r\n\r\n    )\r\n}\r\n\r\nexport default MeterDataDetails"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}