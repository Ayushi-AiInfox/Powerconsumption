{"ast":null,"code":"import{Link,useNavigate}from\"react-router-dom\";import{useEffect,useState}from\"react\";import{jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Protected_routes(_ref){let{Component}=_ref;const navigate=useNavigate();const[isChecked,setIsChecked]=useState(false);// A state to prevent rapid redirects\nconst token=localStorage.getItem('token');const role=localStorage.getItem('role');const checkToken=async()=>{if(!token){navigate('/');}};useEffect(()=>{if(!isChecked){checkToken();setIsChecked(true);// Mark the check as done\n}},[]);return/*#__PURE__*/_jsx(_Fragment,{children:Component&&/*#__PURE__*/_jsx(Component,{})});}","map":{"version":3,"names":["Link","useNavigate","useEffect","useState","jsx","_jsx","Fragment","_Fragment","Protected_routes","_ref","Component","navigate","isChecked","setIsChecked","token","localStorage","getItem","role","checkToken","children"],"sources":["C:/Users/ATS/Downloads/power-c/src/common/protected_routes.jsx"],"sourcesContent":["import { Link, useNavigate } from \"react-router-dom\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport default function Protected_routes({ Component }) {\r\n    const navigate = useNavigate();\r\n    const [isChecked, setIsChecked] = useState(false);  // A state to prevent rapid redirects\r\n    const token = localStorage.getItem('token');\r\n    const role = localStorage.getItem('role');\r\n\r\n    const checkToken = async () => {\r\n        if (!token) {\r\n            navigate('/');\r\n        } \r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!isChecked) {\r\n            checkToken();\r\n            setIsChecked(true);  // Mark the check as done\r\n        }\r\n    }, []);\r\n\r\n    return <>{Component && <Component />}</>;\r\n}\r\n"],"mappings":"AAAA,OAASA,IAAI,CAAEC,WAAW,KAAQ,kBAAkB,CACpD,OAASC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE5C,cAAe,SAAS,CAAAC,gBAAgBA,CAAAC,IAAA,CAAgB,IAAf,CAAEC,SAAU,CAAC,CAAAD,IAAA,CAClD,KAAM,CAAAE,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAC9B,KAAM,CAACW,SAAS,CAAEC,YAAY,CAAC,CAAGV,QAAQ,CAAC,KAAK,CAAC,CAAG;AACpD,KAAM,CAAAW,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,KAAM,CAAAC,IAAI,CAAGF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAEzC,KAAM,CAAAE,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC3B,GAAI,CAACJ,KAAK,CAAE,CACRH,QAAQ,CAAC,GAAG,CAAC,CACjB,CACJ,CAAC,CAEDT,SAAS,CAAC,IAAM,CACZ,GAAI,CAACU,SAAS,CAAE,CACZM,UAAU,CAAC,CAAC,CACZL,YAAY,CAAC,IAAI,CAAC,CAAG;AACzB,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,mBAAOR,IAAA,CAAAE,SAAA,EAAAY,QAAA,CAAGT,SAAS,eAAIL,IAAA,CAACK,SAAS,GAAE,CAAC,CAAG,CAAC,CAC5C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}