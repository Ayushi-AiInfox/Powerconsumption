{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import $ from\"jquery\";import\"datatables.net-dt/js/dataTables.dataTables.js\";import{Icon}from\"@iconify/react\";import{Link}from\"react-router-dom\";import{apiPost}from\"../services/client\";import{useSearchParams}from\"react-router-dom\";import moment from\"moment\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const MeterDataTable=()=>{const[searchParams]=useSearchParams();const id=searchParams.get(\"id\");const[data,setData]=useState([]);const getData=async()=>{try{var _res$data;const data={id};const res=await apiPost('userapp/meter-consumption-logs',data);if((res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.status)===true){var _res$data2;const newData=res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.data;setData(newData);setTimeout(()=>{$(\"#dataTable\").DataTable({pageLength:10});},0);}else{var _res$data3;console.log(res===null||res===void 0?void 0:(_res$data3=res.data)===null||_res$data3===void 0?void 0:_res$data3.message);}}catch(e){console.log(e);}};useEffect(()=>{getData();return()=>{if($.fn.DataTable.isDataTable(\"#dataTable\")){$(\"#dataTable\").DataTable().destroy(true);}};},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"card basic-data-table\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h5\",{className:\"card-title mb-0\",children:\"ALL Meters Kwh\"})}),data?/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table bordered-table mb-0\",id:\"dataTable\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"S.R\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Meter Id\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total Power\"}),/*#__PURE__*/_jsx(\"th\",{children:\"DateTime\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data===null||data===void 0?void 0:data.map((item,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\"}),/*#__PURE__*/_jsx(\"label\",{children:index+1})]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(Link,{to:\"#\",className:\"text-primary-600\",children:[\"Meter \",item===null||item===void 0?void 0:item.meter_id]})}),/*#__PURE__*/_jsx(\"td\",{children:item===null||item===void 0?void 0:item.power}),/*#__PURE__*/_jsx(\"td\",{children:moment(item===null||item===void 0?void 0:item.created_at).format(\"MMMM Do YYYY, h:mm:ss A\")}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"bg-success-focus text-success-main px-24 py-4 rounded-pill fw-medium text-sm\",children:\"Normal\"})})]},index))})]})}):/*#__PURE__*/_jsx(_Fragment,{})]});};export default MeterDataTable;","map":{"version":3,"names":["React","useEffect","useState","$","Icon","Link","apiPost","useSearchParams","moment","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MeterDataTable","searchParams","id","get","data","setData","getData","_res$data","res","status","_res$data2","newData","setTimeout","DataTable","pageLength","_res$data3","console","log","message","e","fn","isDataTable","destroy","className","children","map","item","index","type","to","meter_id","power","created_at","format"],"sources":["C:/Users/ATS/Downloads/power-c/src/components/MeterDataTable.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport $ from \"jquery\";\r\nimport \"datatables.net-dt/js/dataTables.dataTables.js\";\r\nimport { Icon } from \"@iconify/react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { apiPost} from \"../services/client\";\r\nimport { useSearchParams } from \"react-router-dom\";\r\nimport moment from \"moment\";\r\n\r\n\r\n\r\nconst MeterDataTable = () => {\r\n    const [searchParams] = useSearchParams();\r\n    const id = searchParams.get(\"id\");\r\n    const [data, setData] = useState([]);\r\n\r\n    const getData = async () => {\r\n        try {\r\n            const data = {id}\r\n            const res = await apiPost('userapp/meter-consumption-logs',data);\r\n            if (res?.data?.status === true) {\r\n                const newData = res?.data?.data;\r\n                setData(newData);\r\n                setTimeout(() => {\r\n                    $(\"#dataTable\").DataTable({\r\n                        pageLength: 10,\r\n                    });\r\n                }, 0);\r\n\r\n                \r\n              \r\n            } else {\r\n                console.log(res?.data?.message);\r\n            }\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        getData();\r\n        return () => {\r\n            if ($.fn.DataTable.isDataTable(\"#dataTable\")) {\r\n                $(\"#dataTable\").DataTable().destroy(true);\r\n            }\r\n        };       \r\n    }, []);\r\n\r\n    return (\r\n\r\n        \r\n        <div className=\"card basic-data-table\">\r\n            <div className=\"card-header\">\r\n                <h5 className=\"card-title mb-0\">ALL Meters Kwh</h5>\r\n            </div>\r\n\r\n            { data ? \r\n            <div className=\"card-body\">\r\n                <table className=\"table bordered-table mb-0\" id=\"dataTable\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th>S.R</th>\r\n                            <th>Meter Id</th>\r\n                            <th>Total Power</th>\r\n                            <th>DateTime</th>\r\n                            <th>Status</th>          \r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {data?.map((item, index) => (\r\n                            <tr key={index}>\r\n                                <td>\r\n                                    <input className=\"form-check-input\" type=\"checkbox\" />\r\n                                    <label>{index + 1}</label>\r\n                                </td>\r\n                                <td>\r\n                                    <Link to=\"#\" className=\"text-primary-600\">\r\n                                        Meter {item?.meter_id}\r\n                                    </Link>\r\n                                </td>\r\n                                <td>{item?.power}</td>\r\n                                <td>{moment(item?.created_at).format(\"MMMM Do YYYY, h:mm:ss A\")}</td>\r\n                                <td>\r\n                                    <span className=\"bg-success-focus text-success-main px-24 py-4 rounded-pill fw-medium text-sm\">\r\n                                        Normal\r\n                                    </span>\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            </div> : <></>\r\n\r\n\r\n}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MeterDataTable;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}