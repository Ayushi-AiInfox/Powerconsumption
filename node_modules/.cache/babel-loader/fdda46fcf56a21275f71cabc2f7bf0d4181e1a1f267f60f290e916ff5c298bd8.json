{"ast":null,"code":"import{Icon}from'@iconify/react/dist/iconify.js';import{useState}from\"react\";import React from'react';import{apiPost}from\"../services/client\";import{Link,useNavigate}from\"react-router-dom\";import{useLocation}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NewPasswordLayer=()=>{const location=useLocation();const queryParams=new URLSearchParams(location.search);const token=queryParams.get(\"token\");console.log(token);localStorage.setItem('token',token);const[password,setPassword]=useState(null);const[confirm_password,setConfirmPassword]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const navigate=useNavigate();const newPassword=async()=>{try{var _res$data;setLoading(true);const data={password,confirm_password};console.log(data);const res=await apiPost('reset-password',data);console.log('response',res);if((res===null||res===void 0?void 0:(_res$data=res.data)===null||_res$data===void 0?void 0:_res$data.status)==true){var _res$data2,_res$data3,_res$data4,_res$data5;localStorage.setItem('token',res===null||res===void 0?void 0:(_res$data2=res.data)===null||_res$data2===void 0?void 0:_res$data2.token);localStorage.setItem('role',res===null||res===void 0?void 0:(_res$data3=res.data)===null||_res$data3===void 0?void 0:_res$data3.role);if((res===null||res===void 0?void 0:(_res$data4=res.data)===null||_res$data4===void 0?void 0:_res$data4.role)=='user'){navigate(\"/dashboard\");}else if((res===null||res===void 0?void 0:(_res$data5=res.data)===null||_res$data5===void 0?void 0:_res$data5.role)=='admin'){navigate(\"/admin-dashboard\");}}else{var _res$response,_res$response$data;setError(res===null||res===void 0?void 0:(_res$response=res.response)===null||_res$response===void 0?void 0:(_res$response$data=_res$response.data)===null||_res$response$data===void 0?void 0:_res$response$data.message);}}catch(error){setError(error);console.log(error);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"section\",{className:\"auth bg-base d-flex flex-wrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"auth-left d-lg-block d-none\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center flex-column h-100 justify-content-center\",children:/*#__PURE__*/_jsx(\"img\",{src:\"assets/images/reset-pass-1.png\",alt:\"\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"auth-right py-32 px-24 d-flex flex-column justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-464-px mx-auto w-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sign-in-div\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"mb-40 max-w-290-px\",children:/*#__PURE__*/_jsx(\"img\",{src:\"assets/images/power-logo-1.png\",alt:\"\",className:\"sign-in-div-img\"})}),/*#__PURE__*/_jsx(\"h4\",{className:\"mb-12\",children:\"Reset Your Password\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-32 text-secondary-light text-lg\",children:\"please enter password and confirm password\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"icon-field mb-16\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon top-50 translate-middle-y\",children:/*#__PURE__*/_jsx(Icon,{icon:\"solar:lock-password-outline\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control h-56-px bg-neutral-50 radius-12\",placeholder:\"Password\",onChange:e=>setPassword(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative mb-20\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"icon-field\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"icon top-50 translate-middle-y\",children:/*#__PURE__*/_jsx(Icon,{icon:\"solar:lock-password-outline\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control h-56-px bg-neutral-50 radius-12\",id:\"your-password\",placeholder:\"Confirm Password\",onChange:e=>setConfirmPassword(e.target.value)})]}),/*#__PURE__*/_jsx(\"span\",{className:\"toggle-password ri-eye-line cursor-pointer position-absolute end-0 top-50 translate-middle-y me-16 text-secondary-light\",\"data-toggle\":\"#your-password\"})]}),loading?/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary text-sm btn-sm px-12 py-16 w-100 radius-12 mt-32\",children:[\" \",\"Loading...\"]}):/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary text-sm btn-sm px-12 py-16 w-100 radius-12 mt-32\",onClick:newPassword,children:[\" \",\"Continue\"]})]})})]});};export default NewPasswordLayer;","map":{"version":3,"names":["Icon","useState","React","apiPost","Link","useNavigate","useLocation","jsx","_jsx","jsxs","_jsxs","NewPasswordLayer","location","queryParams","URLSearchParams","search","token","get","console","log","localStorage","setItem","password","setPassword","confirm_password","setConfirmPassword","loading","setLoading","error","setError","navigate","newPassword","_res$data","data","res","status","_res$data2","_res$data3","_res$data4","_res$data5","role","_res$response","_res$response$data","response","message","className","children","src","alt","to","icon","type","placeholder","onChange","e","target","value","id","onClick"],"sources":["C:/Users/ATS/Downloads/power-c/src/components/NewPasswordLayer.jsx"],"sourcesContent":["import { Icon } from '@iconify/react/dist/iconify.js'\r\nimport { useState } from \"react\";\r\nimport React from 'react'\r\nimport { apiPost } from \"../services/client\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nconst NewPasswordLayer = () => {\r\n\r\n    const location = useLocation();\r\n    const queryParams = new URLSearchParams(location.search);\r\n    const token = queryParams.get(\"token\");\r\n    console.log(token);\r\n    localStorage.setItem('token',token);\r\n    const [password, setPassword] = useState(null);\r\n    const [confirm_password,setConfirmPassword] = useState(null);\r\n    const [loading, setLoading] = useState(false)\r\n    const [error,setError] = useState(null);\r\n    const navigate = useNavigate()\r\n\r\n\r\n    const newPassword = async () => {\r\n        try {\r\n            setLoading(true)\r\n            const data = { password, confirm_password }\r\n            console.log(data);\r\n            const res = await apiPost('reset-password', data);\r\n            console.log('response',res);\r\n         \r\n            if (res?.data?.status == true) {\r\n                localStorage.setItem('token',res?.data?.token);\r\n                localStorage.setItem('role',res?.data?.role);\r\n            \r\n                if (res?.data?.role=='user'){\r\n                    navigate(`/dashboard`)\r\n\r\n                }else if(res?.data?.role=='admin'){\r\n                    navigate(`/admin-dashboard`)\r\n                  }\r\n            } else {\r\n                setError(res?.response?.data?.message);\r\n\r\n            }\r\n        } catch (error) {\r\n            setError(error);\r\n            console.log(error);\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n    return (\r\n        <section className=\"auth bg-base d-flex flex-wrap\">\r\n            <div className=\"auth-left d-lg-block d-none\">\r\n                <div className=\"d-flex align-items-center flex-column h-100 justify-content-center\">\r\n                    <img src=\"assets/images/reset-pass-1.png\" alt=\"\" />\r\n                </div>\r\n            </div>\r\n            <div className=\"auth-right py-32 px-24 d-flex flex-column justify-content-center\">\r\n                <div className=\"max-w-464-px mx-auto w-100\">\r\n                    <div className='sign-in-div'>\r\n                        <Link to=\"/\" className=\"mb-40 max-w-290-px\">\r\n                            <img src=\"assets/images/power-logo-1.png\" alt=\"\" className='sign-in-div-img' />\r\n                        </Link>\r\n                        <h4 className=\"mb-12\">Reset Your Password</h4>\r\n                        <p className=\"mb-32 text-secondary-light text-lg\">\r\n                            please enter password and confirm password\r\n                        </p>\r\n                    </div>\r\n                  \r\n                        <div className=\"icon-field mb-16\">\r\n                            <span className=\"icon top-50 translate-middle-y\">\r\n                                <Icon icon=\"solar:lock-password-outline\" />\r\n                            </span>\r\n                            <input\r\n                                type=\"password\"\r\n                                className=\"form-control h-56-px bg-neutral-50 radius-12\"\r\n                                placeholder=\"Password\"\r\n                                onChange={(e) => setPassword(e.target.value)} \r\n                            />\r\n                        </div>\r\n                        <div className=\"position-relative mb-20\">\r\n                            <div className=\"icon-field\">\r\n                                <span className=\"icon top-50 translate-middle-y\">\r\n                                    <Icon icon=\"solar:lock-password-outline\" />\r\n                                </span>\r\n                                <input\r\n                                    type=\"password\"\r\n                                    className=\"form-control h-56-px bg-neutral-50 radius-12\"\r\n                                    id=\"your-password\"\r\n                                    placeholder=\"Confirm Password\"\r\n                                    onChange={(e) => setConfirmPassword(e.target.value)}\r\n                                />\r\n                            </div>\r\n                            <span\r\n                                className=\"toggle-password ri-eye-line cursor-pointer position-absolute end-0 top-50 translate-middle-y me-16 text-secondary-light\"\r\n                                data-toggle=\"#your-password\"\r\n                            />\r\n                        </div>\r\n                      \r\n                        { loading ? \r\n                        <button\r\n                            \r\n                            className=\"btn btn-primary text-sm btn-sm px-12 py-16 w-100 radius-12 mt-32\"\r\n                        >\r\n                            {\" \"}\r\n                            Loading...\r\n                        </button> :\r\n\r\n                            <button\r\n\r\n                            className=\"btn btn-primary text-sm btn-sm px-12 py-16 w-100 radius-12 mt-32\"\r\n                            onClick={newPassword}\r\n                            >\r\n                            {\" \"}\r\n                        Continue\r\n                    </button>\r\n                    }\r\n                 \r\n                </div>\r\n            </div>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default NewPasswordLayer"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}